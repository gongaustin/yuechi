<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.gongjun.yuechi.mapper.UserMapper">

    <select id="selectUserPermissionsByWrapper" resultType="com.gongjun.yuechi.model.Permission">
        SELECT
        DISTINCT up.*
        FROM
            upms_permission up
            LEFT JOIN upms_role_permission urp ON urp.`permission_id` = up.`id`
            LEFT JOIN upms_role ur ON ur.`id` = urp.`role_id`
            LEFT JOIN upms_user_role uur ON uur.`role_id` = ur.`id`
        WHERE 1 = 1
            ${ew.sqlSegment}
        ORDER BY
            up.`orders`
    </select>

</mapper>
